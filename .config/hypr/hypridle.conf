general {
    lock_cmd = hyprlock
}

# 4 minutes -> turn display off (DPMS)
listener {
    timeout = 240
    on-timeout = hyprctl dispatch dpms off
    on-resume = hyprctl dispatch dpms on
}

# 5 minutes -> lock the session (keep current behavior)
listener {
    timeout = 300
    on-timeout = loginctl lock-session && hyprlock
    on-resume = hyprctl dispatch dpms on
}

# 10 minutes idle -> lock & suspend
listener {
    timeout = 600
    # turn DPMS on, give a tiny moment for the compositor to re-enable the display,
    # then lock the session and suspend
    on-timeout = sh -c "hyprctl dispatch dpms on; sleep 0.2; loginctl lock-session && systemctl hibernate"
    # also attempt to turn DPMS back on after resume (extra safety)
    on-resume = hyprctl dispatch dpms on
}
